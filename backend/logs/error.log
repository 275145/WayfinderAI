{"timestamp": "2025-12-15T23:56:26.225909", "level": "ERROR", "logger": "trip_planner", "message": "解析或验证LLM返回的JSON时失败: LLM调用失败: Error code: 401 - {'errors': {'message': 'Authentication failed, please make sure that a valid ModelScope token is supplied.', 'request_id': '09749269-0d47-4a71-a8f5-f4de03d2cb7a'}}", "module": "planner", "function": "plan_trip", "line": 416, "request_id": "44097c8d-d689-45b0-b68f-002602ed853b", "exception": {"type": "Exception", "message": "LLM调用失败: Error code: 401 - {'errors': {'message': 'Authentication failed, please make sure that a valid ModelScope token is supplied.', 'request_id': '09749269-0d47-4a71-a8f5-f4de03d2cb7a'}}", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\services\\llm_service.py\", line 159, in invoke\n    response = self.client.chat.completions.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 286, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1147, in create\n    return self._post(\n           ^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\openai\\_base_client.py\", line 1259, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\openai\\_base_client.py\", line 1047, in request\n    raise self._make_status_error_from_response(err.response) from None\n", "openai.AuthenticationError: Error code: 401 - {'errors': {'message': 'Authentication failed, please make sure that a valid ModelScope token is supplied.', 'request_id': '09749269-0d47-4a71-a8f5-f4de03d2cb7a'}}\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\planner.py\", line 351, in plan_trip\n    attractions = attraction_agent.run(attraction_query)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\specialized_agents.py\", line 264, in run\n    result = super().run(input_text, max_tool_iterations, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\enhanced_agent.py\", line 195, in run\n    return self._run_with_tools(messages, input_text, max_tool_iterations, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\enhanced_agent.py\", line 210, in _run_with_tools\n    response = self.llm.invoke(messages, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\services\\llm_service.py\", line 168, in invoke\n    raise Exception(f\"LLM调用失败: {str(e)}\")\n", "Exception: LLM调用失败: Error code: 401 - {'errors': {'message': 'Authentication failed, please make sure that a valid ModelScope token is supplied.', 'request_id': '09749269-0d47-4a71-a8f5-f4de03d2cb7a'}}\n"]}, "thread": 1260, "process": 40456}
{"timestamp": "2025-12-15T23:56:26.241166", "level": "ERROR", "logger": "trip_planner", "message": "业务异常: 行程规划失败", "module": "exception_handler", "function": "global_exception_handler", "line": 29, "exception": {"type": "BusinessException", "message": "行程规划失败", "traceback": ["  + Exception Group Traceback (most recent call last):\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 79, in collapse_excgroups\n  |     yield\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n", "  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n", "  +-+---------------- 1 ----------------\n", "    | Traceback (most recent call last):\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\trip.py\", line 69, in plan_trip\n    |     raise BusinessException(\n", "    | app.exceptions.custom_exceptions.BusinessException: 行程规划失败\n", "    +------------------------------------\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\trip.py\", line 69, in plan_trip\n    raise BusinessException(\n", "app.exceptions.custom_exceptions.BusinessException: 行程规划失败\n"]}, "thread": 39276, "process": 40456}
{"timestamp": "2025-12-19T01:01:53.886695", "level": "ERROR", "logger": "trip_planner", "message": "解析或验证LLM返回的JSON时失败: name 'memory_service' is not defined", "module": "planner", "function": "plan_trip", "line": 448, "exception": {"type": "NameError", "message": "name 'memory_service' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\planner.py\", line 428, in plan_trip\n    memory_service.store_user_preference(\n    ^^^^^^^^^^^^^^\n", "NameError: name 'memory_service' is not defined\n"]}, "thread": 39684, "process": 34776}
{"timestamp": "2025-12-29T16:02:15.026453", "level": "ERROR", "logger": "trip_planner", "message": "未处理的异常: TypeError: AuthMiddleware.generate_jwt_token() missing 1 required positional argument: 'email'", "module": "exception_handler", "function": "global_exception_handler", "line": 110, "exception": {"type": "TypeError", "message": "AuthMiddleware.generate_jwt_token() missing 1 required positional argument: 'email'", "traceback": ["  + Exception Group Traceback (most recent call last):\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 79, in collapse_excgroups\n  |     yield\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n", "  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n", "  +-+---------------- 1 ----------------\n", "    | Traceback (most recent call last):\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\auth.py\", line 65, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\auth.py\", line 160, in register\n    |     access_token = AuthMiddleware.generate_jwt_token(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    | TypeError: AuthMiddleware.generate_jwt_token() missing 1 required positional argument: 'email'\n", "    +------------------------------------\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\auth.py\", line 65, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\auth.py\", line 160, in register\n    access_token = AuthMiddleware.generate_jwt_token(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "TypeError: AuthMiddleware.generate_jwt_token() missing 1 required positional argument: 'email'\n"]}, "thread": 32804, "process": 29244}
{"timestamp": "2025-12-29T17:02:37.518338", "level": "ERROR", "logger": "trip_planner", "message": "检索用户记忆失败: ", "module": "vector_memory_service", "function": "retrieve_user_memories", "line": 306, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:02:37.547030", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:03:32.378122", "level": "ERROR", "logger": "trip_planner", "message": "检索用户记忆失败: ", "module": "vector_memory_service", "function": "retrieve_user_memories", "line": 306, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:03:32.389116", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:03:38.254846", "level": "ERROR", "logger": "trip_planner", "message": "检索用户记忆失败: ", "module": "vector_memory_service", "function": "retrieve_user_memories", "line": 306, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:03:38.276627", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:04:05.961137", "level": "ERROR", "logger": "trip_planner", "message": "检索用户记忆失败: ", "module": "vector_memory_service", "function": "retrieve_user_memories", "line": 306, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:04:05.984519", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:04:14.634099", "level": "ERROR", "logger": "trip_planner", "message": "检索用户记忆失败: ", "module": "vector_memory_service", "function": "retrieve_user_memories", "line": 306, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:04:14.661022", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:05:03.329275", "level": "ERROR", "logger": "trip_planner", "message": "解析或验证LLM返回的JSON时失败: VectorMemoryService.store_user_preference() missing 1 required positional argument: 'preference_data'", "module": "planner", "function": "plan_trip", "line": 448, "request_id": "0a9ecc74-618e-49e5-ab06-44b6dee1d5b0", "exception": {"type": "TypeError", "message": "VectorMemoryService.store_user_preference() missing 1 required positional argument: 'preference_data'", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\agents\\planner.py\", line 428, in plan_trip\n    VectorMemoryService.store_user_preference(\n", "TypeError: VectorMemoryService.store_user_preference() missing 1 required positional argument: 'preference_data'\n"]}, "thread": 52908, "process": 43424}
{"timestamp": "2025-12-29T17:05:03.333235", "level": "ERROR", "logger": "trip_planner", "message": "业务异常: 行程规划失败", "module": "exception_handler", "function": "global_exception_handler", "line": 29, "exception": {"type": "BusinessException", "message": "行程规划失败", "traceback": ["  + Exception Group Traceback (most recent call last):\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 79, in collapse_excgroups\n  |     yield\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n", "  |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n", "  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n", "  +-+---------------- 1 ----------------\n", "    | Traceback (most recent call last):\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\auth.py\", line 81, in dispatch\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n", "    |   File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n", "    |   File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\trip.py\", line 94, in plan_trip\n    |     raise BusinessException(\n", "    | app.exceptions.custom_exceptions.BusinessException: 行程规划失败\n", "    +------------------------------------\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\rate_limit.py\", line 221, in dispatch\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\auth.py\", line 81, in dispatch\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\middleware\\request_id.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 391, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\fastapi\\routing.py\", line 292, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"C:\\Users\\tzh19\\.conda\\envs\\py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\code\\agent\\trip_planner\\backend\\app\\api\\v1\\trip.py\", line 94, in plan_trip\n    raise BusinessException(\n", "app.exceptions.custom_exceptions.BusinessException: 行程规划失败\n"]}, "thread": 47068, "process": 43424}
{"timestamp": "2025-12-29T17:13:13.405503", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "fcaca399-35df-4d9b-83b8-14b921800b7a", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:14:04.425830", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "fcaca399-35df-4d9b-83b8-14b921800b7a", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:14:09.164477", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "fcaca399-35df-4d9b-83b8-14b921800b7a", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:14:21.148966", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "fcaca399-35df-4d9b-83b8-14b921800b7a", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:14:27.917776", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "fcaca399-35df-4d9b-83b8-14b921800b7a", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:23:16.110047", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "bab45259-0f3d-476f-ae59-ddafaf8b6f5b", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:24:06.777649", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "bab45259-0f3d-476f-ae59-ddafaf8b6f5b", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:24:14.151632", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "bab45259-0f3d-476f-ae59-ddafaf8b6f5b", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:24:25.141139", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "bab45259-0f3d-476f-ae59-ddafaf8b6f5b", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-29T17:24:30.249264", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "bab45259-0f3d-476f-ae59-ddafaf8b6f5b", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-30T15:12:31.836545", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "c53cf43a-dea0-42ea-be7f-c043f3a0f40d", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-30T15:13:40.482842", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "c53cf43a-dea0-42ea-be7f-c043f3a0f40d", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-30T15:13:50.447456", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "c53cf43a-dea0-42ea-be7f-c043f3a0f40d", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-30T15:13:59.625986", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "c53cf43a-dea0-42ea-be7f-c043f3a0f40d", "thread": 14836, "process": 16900}
{"timestamp": "2025-12-30T15:14:04.913168", "level": "ERROR", "logger": "trip_planner", "message": "检索知识记忆失败: ", "module": "vector_memory_service", "function": "retrieve_knowledge_memories", "line": 459, "request_id": "c53cf43a-dea0-42ea-be7f-c043f3a0f40d", "thread": 14836, "process": 16900}
